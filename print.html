<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Freeplane Docs</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="home.html">Home</a></li><li class="chapter-item expanded affix "><a href="how-to-get-help.html">How to get help</a></li><li class="chapter-item expanded affix "><a href="getting-started/getting-started.html">Getting started</a></li><li class="chapter-item expanded affix "><a href="user-documentation/first-steps.html">User documentation</a></li><li class="chapter-item expanded affix "><a href="https://github.com/freeplane/freeplane/discussions/categories/shared-mind-maps.html">Mind map examples</a></li><li class="chapter-item expanded affix "><a href="contribute/contribute.html">Contribute</a></li><li class="chapter-item expanded affix "><a href="scripting/Scripting.html">Scripting</a></li><li class="chapter-item expanded affix "><a href="coding/Git_howto.html">Coding</a></li><li class="chapter-item expanded affix "><a href="attic/home.html">Attic (draft documents)</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Freeplane Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="freeplane"><a class="header" href="#freeplane">Freeplane</a></h2>
<p><a href="http://freeplane.sourceforge.net">Freeplane</a> is a free and open source software application that supports thinking, sharing information, getting things done at work, in school and at home.
It provides you a set of tools for mind mapping (also known as concept mapping or information mapping) and navigating the mapped information.
Freeplane is also a more robust and superuser alternative to Xmind, Mindmeister, and similar mind mapping software.</p>
<p>Freeplane is written in Java using OSGi and Java Swing.
It runs on any operating system that has a current version of Java installed.
It can be run locally or portably from removable storage like a USB drive.</p>
<p>Download and install the latest version over at <a href="https://sourceforge.net/projects/freeplane/files/">Sourceforge</a>.
The change log is available <a href="https://www.freeplane.org/changelog">here</a>. </p>
<p>If you would like to report a bug, you can go report it over at <a href="https://github.com/freeplane/freeplane/issues">Issues</a></p>
<p>Hop on to our <a href="https://github.com/freeplane/freeplane/discussions">Discussions</a> if you have any questions, ideas, or thoughts you'd like to share.
Contributors are very much welcome, of course!</p>
<h2 id="features-rundown"><a class="header" href="#features-rundown">Features rundown</a></h2>
<p><img src="images/a-students-second-brain.png" alt="student" title=":size=600" /></p>
<p><img src="images/no-more-slides.png" alt="slides" title=":size=600" /></p>
<p><img src="images/extensive-formatting-options.png" alt="formatting" title=":size=600" /></p>
<p><img src="images/ui.png" alt="UI" title=":size=600" /></p>
<p><img src="images/add-ons-and-scripting-aka-macros.png" alt="addons" title=":size=600" /></p>
<p><img src="images/command-search.png" alt="command search" title=":size=600" /></p>
<p><img src="images/conditional-styling.png" alt="styling" title=":size=600" /></p>
<p><img src="images/formulas.png" alt="formulas" title=":size=600" /></p>
<p><img src="images/discussions.png" alt="discussions" title=":size=600" /></p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="how-to-get-help"><a class="header" href="#how-to-get-help">How to get help</a></h2>
<p>Freeplane is a non-commercial project.
It lives by our active and vibrant <a href="contribute/Contributing_to_Freeplane&#x27;s_Development.html">community</a>, where we try to support each other in order to develop and provide an outstanding knowledge management application.
Please, feel free to discuss Freeplane and its features with other interested Freeplane users. For this purpose, we provided two forums (see structure picture on the right):</p>
<p>We invite you to do the following things:</p>
<p>in our <strong><a href="https://github.com/freeplane/freeplane/discussions">DISCUSSIONS FORUM</a></strong></p>
<ul>
<li>discuss the usage of existing features</li>
<li>discuss the suitability of new features</li>
<li>discuss the development of <a href="scripting/Scripts_collection.html">existing scripts</a> and new ones</li>
</ul>
<p>New bug reports go into the <a href="https://github.com/freeplane/freeplane/issues/new?template=bug_report.md">bug reports</a></p>
<p>New feature requests go into the <a href="https://github.com/freeplane/freeplane/issues/new?template=feature_request.md">feature requests</a></p>
<p>Freeplane's old user forums are archived <a href="https://sourceforge.net/p/freeplane/discussion/758437">here</a> and <a href="https://www.freeplane.org/forum2012/viewforum.php?f=1">here</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="getting-started"><a class="header" href="#getting-started">Getting started</a></h2>
<h3 id="install"><a class="header" href="#install">Install</a></h3>
<p><a href="https://sourceforge.net/projects/freeplane/" title=":target=_blank"><img src="getting-started/../images/Download.png" alt="Download Freeplane" title=":size=71x67" /></a></p>
<p><big><strong><a href="https://sourceforge.net/projects/freeplane/" title=":target=_blank">Download Freeplane now!</a></strong> </big><br />
(this downloads the stable version 1.10.3)<br />
<a href="https://www.freeplane.org/info/history/history_en.txt">change log</a> <br />
Download last development versions ( <a href="https://sourceforge.net/projects/freeplane/files/freeplane%20preview/"><em><strong>preview</strong></em></a> )</p>
<p>→ <a href="getting-started/Distributions.html">Find out</a> which distribution better fits your requirements.</p>
<p>→ <a href="getting-started/Add-ons_(install).html">Extend with add-ons</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="first-steps"><a class="header" href="#first-steps">First steps</a></h2>
<ul>
<li>to create a new node, press <code>enter</code></li>
<li>to add text to the new node, start typing and press <code>enter</code> when you are done</li>
<li>to navigate between nodes, use the arrow keys</li>
<li>to fold/unfold a selected node, press <code>space</code></li>
<li>to move nodes, drag and drop them with the mouse</li>
<li>For more details, see the rest of this documentation and ask questions in the Freeplane forum.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mind-map-examples"><a class="header" href="#mind-map-examples">Mind map examples</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-start-contributing"><a class="header" href="#how-to-start-contributing">How to Start Contributing</a></h1>
<p>We're currently looking for contributors for developing the documentation.
If you can write simple step-by-step guides, translate existing text into English, transfer text from our old documentation into the new one, then we could use your help.
You can <a href="https://github.com/freeplane/discussions/new">start a discussion post (in the docs project)</a> saying you want to contribute to the documentation and the Freeplane team will respond and assist you.</p>
<p>If you have other ways of contributing: developing an addon, sharing your pre-configured mindmap, or suggestions about future development, please feel free to join us in the <a href="https://github.com/freeplane/freeplane/discussions">Discussions</a></p>
<p>Every contributor or team member freely decides what task they are going to work on.
However, for making the best decision regarding development, it's advised that we first propose and suggest the idea to the community through a discussion post as to enable early discussion and community feedback.</p>
<p><a href="contribute/Contributing_to_Freeplane&#x27;s_Development.html">Join</a> the Freeplane team not only as user but maybe as a</p>
<ul>
<li>developer (coder and designer)</li>
<li>tester (writer of tutorials, screencasts and help texts)</li>
<li>translator (various languages)</li>
<li>forum moderator (care for a specific subject)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><p>Freeplane's builtin functionality can be extended by <a href="http://groovy-lang.org/">Groovy</a> and <a href="http://en.wikipedia.org/wiki/JavaScript">JavaScript</a> scripts. Starting with Freeplane 1.3.5_05 you can use <a href="scripting/Scripting!_Other_languages.html">many other languages</a>, e.g Python. This page gives a first impression what you can do with Groovy scripting and helps to get started.</p>
<p>With Freeplane scripting you can</p>
<ul>
<li>write your own functions and use them from the menu or via keyboard shortcuts,</li>
<li>use <a href="scripting/Formulas.html">formulas</a> in your map to compute stuff like in Excel, and</li>
<li>create <a href="scripting/../getting-started/Add-ons_(install).html">add-ons</a> to share it with other users,</li>
<li>have <a href="scripting/Init_scripts.html">init scripts</a> executed on startup that changes Freeplane's behavior (since Freeplane 1.5).</li>
</ul>
<p>Most people use scripting to automate otherwise tedious procedures like creating a node with a special style and some standard attributes. But much more is possible with scripting.</p>
<p><br> <strong>TOC</strong> </p>
<p><a href="scripting/External_script_file_execution.html">External Groovy scripts</a> can be integrated simply by placing them in the <em>scripts</em> subdirectory of the Freeplane homedir. Such scripts can be used like any other built-in function of Freeplane.</p>
<p>After some preparation we'll create the first script.</p>
<h3 id="preparation"><a class="header" href="#preparation">Preparation</a></h3>
<p>A newly installed Freeplane installation is almost ready for scripting:</p>
<ul>
<li>
<p>The <tt>scripts</tt> directory is created in the <em>User Configuration Folder</em> which you can open via <em>Tools &gt; Open user directory</em>.</p>
</li>
<li>
<p>The <tt>scripts</tt> directory is empty, initially. On startup, the directory is automatically searched for &quot;.groovy&quot; files.</p>
</li>
<li>
<p>Scripting is disabled by default, but before enabling it, let's take <a href="scripting/Security_considerations.html"><strong>security into consideration</strong></a>.</p>
</li>
<li>
<p>After having <a href="scripting/Security_considerations.html"><strong>reflected on security</strong></a>, navigate the menu to <em>Tools &gt; Preferences &gt; Plugins&gt; Scripting</em> and:</p>
<ul>
<li>set ''Script execution enabled'' to ''Yes''</li>
<li>enable ''Permit File/Read Operations (NOT recommended)'' - despite the warning.</li>
<li>These changes take effect without restarting Freeplane and only need to be done once.</li>
</ul>
</li>
</ul>
<h3 id="select-an-editor"><a class="header" href="#select-an-editor">Select an editor</a></h3>
<p>You will need a text editor. For the first steps presented on this page any editor will do, such as Notepad on Windows (though <a href="http://notepad-plus-plus.org">the free Notepad++</a>is much better), <a href="http://www.sublimetext.com/">Sublime Text</a> or TextEdit on Mac OS X. You can find an overview of editors with Groovy support <a href="http://stackoverflow.com/questions/10864770/editor-for-groovy-and-grails">on Stackoverflow</a> and on the <a href="http://groovy-lang.org/ides.html">Groovy website</a>.</p>
<p>Freeplane also has a small script editor built into it. It is reached through <em>Tools-&gt;Edit Script</em>. You can run the scripts directly in the editor and store them as attributes of the node you are working in. But such <a href="scripting/Map_local_scripts.html">map local scripts</a> are most useful for quick tests since you can not write the scripts directly to &quot;.groovy&quot; files.</p>
<p>For ambitious scripting projects or if you have Java/Eclipse know-how you should have a look at the page on <a href="scripting/Scripting_environment_setup.html">Scripting environment setup</a>.</p>
<h2 id="the-first-script-helloworldgroovy"><a class="header" href="#the-first-script-helloworldgroovy">The first script: HelloWorld.groovy</a></h2>
<p>&quot;Hello World&quot; is the traditional first program when taking up a programming language. Let's create a Groovy Freeplane version of it:</p>
<ul>
<li>Create an empty Groovy script file named <tt>HelloWorld.groovy</tt> in your scripts directory (remember that you can get there via <em>Tools &gt; Open user directory</em>). The suffix <tt>.groovy</tt> is mandatory.</li>
<li>Open <tt>HelloWorld.groovy</tt> in an appropriate editor as detailed <a href="scripting/Scripting.html#Create-a-script-and-integrate-it-into-Freeplane">above</a>.</li>
<li>Copy the following script into the file and save it.</li>
</ul>
<pre><code class="language-groovy">node.text = &quot;Hello World!&quot;
</code></pre>
<ul>
<li>Execute the script by selecting <em>Tools-&gt;Scripts-&gt;Hello World-&gt;Execute on one selected node</em>. (Never mind the difference between the <em>Execute ...</em> variants; we'll come to that <a href="scripting/Scripting.html#Execution_modes">later</a>.)</li>
<li>The text of the selected node will be changed to &quot;Hello World!&quot;.</li>
<li>To restore the original, press Ctrl-Z.</li>
<li>If you like try the other &quot;Execute...&quot; menu items. Test the influence of selecting multiple nodes. Always press Ctrl-Z to revert the changes.</li>
</ul>
<h2 id="hello-controller"><a class="header" href="#hello-controller">Hello Controller</a></h2>
<p>Every script is given the variables </p>
<table border="1" style="background-color:#E0E0E0;">
<tr>
<td>**node**</td>
<td>set to the currently selected node</td>
<tr>
<td>**c**</td>
<td>tool box for various tasks relating to the map or Freeplane altogether</td>
</tr>
</table>
<p>These give access to the two most important bits of a map. In HelloWorld we used <em>node</em>, which gave access to the selected node.</p>
<p>Now we'll change HelloWorld.groovy to use the second, the Controller variable <em>c</em>:</p>
<ul>
<li>Copy the following script into the file and save it:</li>
</ul>
<pre><code class="language-groovy">c.statusInfo = &quot;Hello World!&quot;
</code></pre>
<ul>
<li>Execute the script by selecting <em>Tools-&gt;Scripts-&gt;Hello World-&gt;Execute on one selected node</em>.</li>
</ul>
<p>The &quot;Controller&quot; manages the status bar. By assigning &quot;Hello World!&quot; to the Controller attribute &quot;statusInfo&quot; we are able to print text to the status bar.</p>
<h3 id="the-scripting-api"><a class="header" href="#the-scripting-api">The scripting API</a></h3>
<p>The variables <em>node</em> and <em>c</em> are &quot;objects&quot; with a list of <em>attributes</em> (like &quot;text&quot;, &quot;details&quot; or &quot;style&quot;) and <em>methods</em> that operate on the object, like &quot;addConnector()&quot;, &quot;createChild()&quot; or &quot;moveTo()&quot;. The &quot;type&quot; of the object decides on the list of attribute of attributes and methods an object has. &quot;node&quot; is of type <a href="http://www.freeplane.org/doc/api/org/freeplane/plugin/script/proxy/Proxy.NodeRO.html">Proxy.Node</a> while &quot;c&quot; has the type <a href="http://www.freeplane.org/doc/api/org/freeplane/plugin/script/proxy/Proxy.Controller.html">Proxy.Controller</a>.</p>
<p>To get started with Freeplane scripting you have to get slowly accustomed to the Groovy syntax and the Freeplane specialities too. The types and objects that Freeplane supports are defined by <a href="scripting/Scripting_API.html">Freeplane's scripting API</a>. You can learn it step by step: Very little is required to write useful scripts.</p>
<p>An important resource is the built-in scripting documentation that is available via <em>Help-&gt;Scripting API</em>. Open it now and search for the <em>statusInfo</em> attribute at <em>Scripting API-&gt;Proxy-&gt;Controller-&gt;statusInfo: String (w)</em>. The text means: The Controller has an attribute <em>statusInfo</em> that only can be written to (<em>w</em>), that is you can't find out what is currently displayed on the status bar. The attribute has type <em>String</em> (either use &quot;double quotes&quot; or 'single quotes'). If you unfold the node you see <em>void setStatusInfo(String)</em>. That means that</p>
<pre><code class="language-groovy">c.statusInfo = 'Hello World!'
</code></pre>
<p>and</p>
<pre><code class="language-groovy">c.setStatusInfo('Hello World!')
</code></pre>
<p>are equivalent. But the first &quot;attribute&quot; style is preferable since it is clearer. The clickable links in the &quot;Scripting API&quot; map carry to the respective location in the <a href="http://www.freeplane.org/doc/api">detailed API description</a> which might be a bit overwhelming at this point.</p>
<h2 id="setting-links"><a class="header" href="#setting-links">Setting links</a></h2>
<p>In the &quot;Scripting API&quot; map, near to statusInfo you find the <em>userDirectory</em> attribute. You can use it to add a link to this directory to your map. Create a new script file <em>addLink.groovy</em> in the script directory with the following content:</p>
<pre><code class="language-groovy">node.link.file = c.userDirectory
</code></pre>
<p>Here an slightly extended version that adds an <em>external link</em> to the selected node(s) and creates a node with a <em>local link</em> back to its parent node:</p>
<pre><code class="language-groovy">node.link.text = 'http://freeplane.org/wiki/index.php?title=Scripting'
</code></pre>
<p>This script creates a <em>local link</em> back to its parent node:</p>
<pre><code class="language-groovy">node.link.node = node.parent
</code></pre>
<p>In the next section we'll see what the &quot;@ExecutionModes&quot; line is about.</p>
<h2 id="execution-modes"><a class="header" href="#execution-modes">Execution modes</a></h2>
<p>For each script we had three submenu entries of &quot;Hello World&quot;. These entries are different with respect to multiple selected nodes: </p>
<p>*In the case of <em>Execute on one selected node</em> a script is executed only once no matter how many nodes are selected. It's best to be used when only a single node is selected since in this case the <tt>node</tt> variable of the script is set to the selected node. If multiple nodes are selected then <tt>node</tt> is set to one of the nodes arbitrarily. That is, you shouldn't count on the selection if multiple nodes are selected.
*With <em>Execute on all selected nodes</em> it is called once for each selected node (with <tt>node</tt> set to the respective node) and with 
*<em>Execute on all selected nodes, recursively</em> the selection will be implicitly extended by all child trees of the selected nodes.</p>
<p>If we chose <em>Execute on all selected nodes</em> for the first version of &quot;Hello World&quot; then the text of all selected nodes changed. - Probably what you expect. By adding the line</p>
<pre><code class="language-groovy">// @ExecutionModes({ON_SELECTED_NODE})
</code></pre>
<p>all other choices would be suppressed.</p>
<p>The second &quot;Hello World&quot; version printed to the status bar. This only has to happen once so here <em>Execute on one selected node</em> is the right choice and we have to add the line </p>
<pre><code class="language-groovy">// @ExecutionModes({ON_SINGLE_NODE})
</code></pre>
<p>It's a good idea to put the &quot;annotations&quot; at the beginning of the script. (In section <a href="scripting/Scripting.html#Simple-text-replacement-getIconName.groovy">Simple text replacement</a> we will see an exception.) ON_SELECTED_NODE_RECURSIVELY applies a script on any node in the branch that has a selected node as root. You can also enable more than one mode by concatening them with commas:</p>
<pre><code class="language-groovy">// @ExecutionModes({ON_SELECTED_NODE, ON_SELECTED_NODE_RECURSIVELY})
</code></pre>
<p>Note that for Groovy this is a comment. - This line is only interpreted by Freeplane. Omitting the <tt>//</tt> will result in a Groovy compilation error. </p>
<h2 id="menu-locations"><a class="header" href="#menu-locations">Menu locations</a></h2>
<p>Scripts can determine to which menu or submenu a script will be added. Even the menu title can be set (although the standard file name to menu title translation should be enough in most cases):</p>
<pre><code class="language-groovy">// @ExecutionModes({on_single_node=&quot;/menu_bar/help[scripting_api_generator_title]&quot;})
</code></pre>
<p>You can find out about the internal menu keys using the <a href="scripting/../getting-started/Add-ons_(install).html">Developer Tools &gt; Menu item info</a>.</p>
<h2 id="per-node-execution-addicongroovy"><a class="header" href="#per-node-execution-addicongroovy">Per node execution: addIcon.groovy</a></h2>
<p>Now let's use the <tt>node</tt> variable again in our next script, <tt>addIcon.groovy</tt> (restart Freeplane to see it in the menu). This script will add the &quot;button_ok&quot; icon to any selected node:</p>
<pre><code class="language-groovy">node.icons.add(&quot;button_ok&quot;)
// @ExecutionModes({ON_SELECTED_NODE})
</code></pre>
<p>This will add the &quot;check&quot; icon to each selected node. Hopefully it's clear that the execution mode <em>Execute on one selected node</em> makes no sense in this case. So let's remove this from the &quot;Extra&quot; menu:</p>
<pre><code class="language-groovy">// @ExecutionModes({ON_SELECTED_NODE, ON_SELECTED_NODE_RECURSIVELY})
node.icons.add(&quot;button_ok&quot;)
</code></pre>
<p>(To see the change in the menu you have to restart Freeplane.)</p>
<p>We will extend this script now a little further to only set the icon if the node text contains the words &quot;yes&quot; or &quot;OK&quot; (case insensitively): </p>
<pre><code class="language-groovy">// @ExecutionModes({ON_SELECTED_NODE, ON_SELECTED_NODE_RECURSIVELY})
if (node.text.toLowerCase().matches(&quot;.*\\b(yes|ok)\\b.*&quot;))
    node.icons.add(&quot;button_ok&quot;)
</code></pre>
<p>Note that <tt>node.text</tt> makes use of the special (compared to Java) attribute handling - see section <a href="scripting/Scripting.html#On-Groovy-properties-and-the-Scripting-API">On Groovy properties and the Scripting API</a>.</p>
<br>
<h2 id="the-status-bar-again-geticonnamegroovy"><a class="header" href="#the-status-bar-again-geticonnamegroovy">The status bar again: getIconName.groovy</a></h2>
<p>Finding the proper name of an icon may be a bit difficult. One way is to use the wanted icon in some map and to look it up in the sources. The XML for a node with an icon might look like that: </p>
<p>&lt;node TEXT=&quot;done&quot; ID=&quot;ID_789648746&quot; CREATED=&quot;1239285242562&quot; MODIFIED=&quot;1242658193277&quot;&gt;<br />
&lt;icon BUILTIN=&quot;button_ok&quot;/&gt;<br />
&lt;/node&gt;</p>
<p>This script writes the icon names of the selected node to the status bar:</p>
<pre><code class="language-groovy">c.statusInfo = &quot;Icons: &quot; + node.icons.icons
</code></pre>
<p>Note: For built-in icons, the icon name is the same as the corresponding graphic file name, that may be found <a href="https://freeplane.sourceforge.io/wiki/index.php/User_icons">here</a>.</p>
<h2 id="formulas"><a class="header" href="#formulas">Formulas</a></h2>
<p>Starting with Freeplane 1.2 one use scripts as <a href="scripting/Formulas.html">Formulas</a> directly in the node core like in Excel. Type this formula in the node core:</p>
<pre><code class="language-groovy">= &quot;Icons: &quot; + node.icons.icons
</code></pre>
<p>This will display the result of the formula instead of the formula itself.</p>
<p>Notes: </p>
<ul>
<li>The equal sign has to be the very first character in the script.</li>
<li>On typing the equal sign as the first character a special script editor pops up which supports syntax highlighting.</li>
</ul>
<h2 id="data-parsing-and-formatting"><a class="header" href="#data-parsing-and-formatting">Data parsing and formatting</a></h2>
<p>TODO: add text</p>
<pre><code class="language-groovy">node.object = 40
def answer = node.to.num0 + 2
</code></pre>
<pre><code class="language-groovy">node.text = '2013-02-15'
c.statusInfo = node.to.date + 1
</code></pre>
<pre><code class="language-groovy">node.object = 42
node.format = '#.00'
</code></pre>
<pre><code class="language-groovy">c.statusInfo = format(42, '#.00').toString()
</code></pre>
<h2 id="navigation-and-iteration"><a class="header" href="#navigation-and-iteration">Navigation and iteration</a></h2>
<p>Many useful scripts operate only on the current/selected node. But most scripts need to access multiple nodes. The scripting API provides methods for accessing special nodes:</p>
<ul>
<li>node.parent - parent node</li>
<li>node.map.root - root of the map</li>
</ul>
<p>For example this script prints the text of the parent node to the status bar:</p>
<pre><code class="language-groovy">c.statusInfo = node.parent.text
</code></pre>
<p>Other methods return node lists:</p>
<ul>
<li>children - list of all children of a node, maybe empty</li>
<li>c.findAll() - all nodes of the map in breath first order</li>
<li>c.findDepthFirst() - all nodes of the map in depth first order</li>
<li>c.find(<closure>) - all nodes for which <closure> returns <em>true</em>.</li>
</ul>
<p>The use of this methods requires some knowledge of <a href="http://groovy-lang.org/Collections">Groovy collections</a>.</p>
<h3 id="filtering"><a class="header" href="#filtering">Filtering</a></h3>
<p>The most important concept is that of &quot;closures&quot;, small code blocks that are used for filtering and modification of the element currently being iterated over. Let's start with filtering:</p>
<pre><code class="language-groovy">def matches = c.find{ it.text.contains('ok') }
c.statusInfo = matches.size() + &quot; nodes contain 'ok'&quot;
</code></pre>
<p>The method <em>find</em> has a closure argument which is applied to all nodes in the map. All nodes for which the closure returns <em>true</em> are returned as a new list which is assigned to the <em>matches</em> variable. In the closure the &quot;current item&quot; has a default name <em>it</em>. As <em>c.find</em> iterates over nodes <em>it</em> is a Node that has the attribute <em>text</em> which is a String that has a method contains() returning true if <em>OK</em> is contained somewhere in the text, like in &quot;grok&quot; or &quot;it's ok&quot;.</p>
<h3 id="transformation"><a class="header" href="#transformation">Transformation</a></h3>
<p>Many Groovy methods transform lists/collections into others:</p>
<pre><code class="language-groovy">def squares = children.collect{ it.to.num0 * it.to.num0 }
</code></pre>
<p>and others transform lists into single values:</p>
<pre><code class="language-groovy">def sumOfSquares = children.sum(0){ it.to.num0 * it.to.num0 }
</code></pre>
<p>When using <em>sum()</em> it's always a good idea to give it a start value since if the node had no children <em>sumOfSquares</em> would be <em>null</em> instead of <em>0</em>.</p>
<h2 id="clones-since-155"><a class="header" href="#clones-since-155">Clones (since 1.5.5)</a></h2>
<p>There are several methods to create clones of nodes and to act on the clones of a node. Note that cloning works symmetrically so we could better speak of shared nodes instead of clone and cloned since none of both is privileged. However each clone or shared node has a unique nodeId and may or not (depending on the share mode) have its own child nodes.</p>
<p>Add two clones of this node to the root node, one as single node, one including the branch starting at this node. Warning: before beta-1.5.5-pre03 appendAsCloneWithSubtree and appendAsCloneWithoutSubtree have reversed meaning!</p>
<pre><code class="language-groovy">def root = node.map.root
def lonelyClone = root.appendAsCloneWithoutSubtree(node)
def childWithSubtree = root.appendAsCloneWithSubtree(node)
// add nodes to the clones
lonelyClone.createChild('a child not shared')
childWithSubtree.createChild('a shared child')
</code></pre>
<p>Mark a node with yellow background color if it has any clone:</p>
<pre><code class="language-groovy">if (node.getCountNodesSharingContent() &gt; 0)
    node.backgroundColorCode = '#ffff00'
</code></pre>
<p>Mark all nodes of a map having any clone:</p>
<pre><code class="language-groovy">c.find{ it.getCountNodesSharingContent() &gt; 0 }.each {
    it.backgroundColorCode = '#ffff00'
}
</code></pre>
<p>If you should be interested in clones that share also the subtree (and not only the core properties) filter for countNodesSharingContentAndSubtree instead of countNodesSharingContent.</p>
<p>Add a connector from node to all of its clones using property-access instead of method (nodesSharingContent instead of getNodesSharingContent()):</p>
<pre><code class="language-groovy">node.nodesSharingContent.each { node.addConnectorTo(it) }
</code></pre>
<p>TODO: Tutorial ends here...</p>
<h2 id="appendix"><a class="header" href="#appendix">Appendix</a></h2>
<h3 id="using-external-libraries"><a class="header" href="#using-external-libraries">Using external libraries</a></h3>
<p>Some libraries are <a href="scripting/Scripting!_Included_libraries.html">already included</a>, but almost all other available Java libraries can be used. Place them in the <tt>lib</tt> directory in the &lt;freeplane_userdir&gt; which is already included in the &quot;Script classpath&quot; (see also Tools-&gt;Preferences-&gt;Plugins). All .class files and the content of all .jar files are automatically available in scripts and formulas.</p>
<p>Starting with Freeplane 1.3 <a href="scripting/Scripting!_Freeplane_Utility_Classes.html">utility scripts</a> on the script classpath are compiled automatically.</p>
<p>You can also create <a href="scripting/Your_own_utility_script_library.html">your own utility script library</a>.</p>
<p>The add-on <a href="http://www.freeplane.org/wiki/index.php/Add-ons_%28install%29#scriptlib"><strong>scriptlib</strong></a> contains some libraries you can load and install. They include some node operations missing in the scripting API, file operations and a method to play audio with a hidden player.</p>
<h3 id="on-groovy"><a class="header" href="#on-groovy">On Groovy</a></h3>
<p>Although Groovy is more or less a superset of Java it would be a shame not to use the new opportunities Groovy provides. On the other hand there are notable differences between Groovy and Ruby. In this section some of the differences between Java, Groovy and Ruby will be listed.</p>
<h4 id="using-external-libraries-from-groovy-scripts-and-formulas"><a class="header" href="#using-external-libraries-from-groovy-scripts-and-formulas">Using external libraries from groovy scripts and formulas</a></h4>
<p>Freeplane 1.7.4 and later also support groovy annotation <code>@grab</code> to add required libraries to your scripts. It means you do not need to place your libraries in lib folder and they are downloaded and managed by groovy itself. The whole dependency management in Groovy scripts is documented at http://docs.groovy-lang.org/latest/html/documentation/grape.html .</p>
<p>The following example shows using a cvs parsing library from https://github.com/xlson/groovycsv available at maven central repository</p>
<pre><code class="language-groovy">@Grab('com.xlson.groovycsv:groovycsv:1.3')
import static com.xlson.groovycsv.CsvParser.parseCsv

def csv = '''Name,Lastname
Mark,Andersson
Pete,Hansen'''

def data = parseCsv(csv)
for(line in data) {
    node.createChild(&quot;$line.Name $line.Lastname&quot;)
}
</code></pre>
<h4 id="on-iteration"><a class="header" href="#on-iteration">On iteration</a></h4>
<p>Groovy provides much improved ways to work on collections of data. This helps a lot in Freeplane scripting since most of the time you are working with collection of <tt>Node</tt> instances. From Java you might be used to this pattern:</p>
<pre><code class="language-groovy">  // NEVER do that in Freeplane scripting!!!
  for (i = 0; i &lt; c.selecteds.size()-1; i++) {
    aNode = c.selecteds[i]
    aNode.text = &quot;Do it groovy instead!&quot;
  }
</code></pre>
<p>But this code is not even ineffective in Freeplane scripting (since every &quot;c.selecteds&quot; call creates a new list with new wrapped Node instances!) but it might even lead to errors since the list might change on the way. The following is better...</p>
<pre><code class="language-groovy">  // better, but still NOT GOOD
  def selected = c.selecteds
  for (i = 0; i &lt; selected.size()-1; i++) {
    def aNode = selected[i]
    aNode.text = &quot;Do it groovy instead!&quot;
  }
</code></pre>
<p>Do yourself a favor and read this short <a href="http://groovy-lang.org/Collections">article on Groovy Collections</a>. Then you will see that the best way to do the same is</p>
<pre><code class="language-groovy">// Good!
c.selecteds.each {
  it.text = &quot;That's groovy!&quot;
}
</code></pre>
<p>c.selecteds is only evaluated once and there are no redundant variables and method calls.</p>
<h4 id="on-groovy-properties-and-the-scripting-api"><a class="header" href="#on-groovy-properties-and-the-scripting-api">On Groovy properties and the Scripting API</a></h4>
<p>If an object, e.g. <tt>Node node</tt>, has a method <tt>getXyz()</tt> then groovy allows to use <tt>node.xyz</tt>. If it also has a proper <tt>setXyz()</tt> method (proper in the sense of the JavaBeans specification) then the property is writable. </p>
<p>Example of a read-only property: <syntaxhighlight lang="Groovy">
assert node.getId() == node.id
println(&quot;ok&quot;)</p>
<p>This will print &quot;ok&quot; into the logfile since the assertion is valid. </p>
<p>Example of a read-write property: <syntaxhighlight lang="Groovy">
println(node.text)
node.text = &quot;please note!&quot;
println(node.text)</p>
<p>The second <tt>println</tt> will print the changed node text.</p>
<p>It's considered better style in Groovy if you use the properties instead of getters and setters. So better use</p>
<pre><code class="language-groovy">c.statusInfo = &quot;Icons: &quot; + node.icons.icons
</code></pre>
<p>instead of</p>
<pre><code class="language-groovy">c.setStatusInfo(&quot;Icons: &quot; + node.getIcons().getIcons())
</code></pre>
<p>The menu item <em>Help -&gt; Scripting API</em> shows the attributes instead of get/set methods where possible and indicates if the attributes are read-only, read-write or write-only.</p>
<h4 id="the-operator--means-equals"><a class="header" href="#the-operator--means-equals">The operator == means equals()</a></h4>
<p>In Groovy the operator <tt>==</tt> is overridden to mean <tt>equals()</tt>. To check for identity use the method <a href="http://groovy-lang.org/groovy-jdk/java/lang/Object.html#is%28java.lang.Object%20other%29">is()</a></p>
<pre><code class="language-groovy">Integer i = new Integer(3)
Integer j = new Integer(3)
assert i == j
assert ! i.is(j)
</code></pre>
<h4 id="caveat"><a class="header" href="#caveat">Caveat</a></h4>
<p>Note that - unlike in <a href="http://www.ruby-lang.org/">Ruby</a> - it's not allowed to omit the parens of a function without parameters in Groovy. So to get the number of children a node has, use <tt>node.children.size()</tt>, not <tt>node.children.size</tt>. The latter would be OK if <tt>java.util.List</tt> had a method <tt>getSize()</tt>.</p>
<br>
<h2 id="wanted-your-participation"><a class="header" href="#wanted-your-participation">Wanted: Your participation!</a></h2>
<p>It's very likely that scripting support lacking some functionality that would be useful for a large number of users. For this reason you are strongly encouraged to give feedback on issues you are having with scripting and on things you are missing. </p>
<ul>
<li>For discussions use https://github.com/freeplane/freeplane/discussions</li>
<li>Submit bugs and feature requests at https://github.com/freeplane/freeplane/issues</li>
<li>Please share useful scripts at https://github.com/freeplane/freeplane/discussions</li>
</ul>
<h2 id="what-users-say"><a class="header" href="#what-users-say">What users say</a></h2>
<ul>
<li>Advice for taking up scripting by <a href="http://sourceforge.net/p/freeplane/discussion/758437/thread/4d367b8d/#3454">Quinbus</a> and <a href="http://sourceforge.net/p/freeplane/discussion/758437/thread/4d367b8d/#3454/451a">Miguel</a>.</li>
</ul>
<h2 id="further-reading"><a class="header" href="#further-reading">Further reading</a></h2>
<p>This guide should have given you a quick overview over what can be done with scripts in Freeplane. Of course we have only scratched the surface. Here are some suggestions to dig further into Groovy / Freeplane scripting: </p>
<ul>
<li><a href="http://groovy-lang.org/learn.html">groovy-learn.org</a> docs, books, presentation and  books for Groovy beginners</li>
<li><a href="http://www.freeplane.org/doc/api/">scripting API</a></li>
<li><a href="scripting/Scripts_collection.html">Scripts collection</a> Learn by example</li>
<li><a href="scripting/Scripting!_Freeplane_Utility_Classes.html">Freeplane utility classes</a> </li>
<li><a href="scripting/Scripting!_Included_libraries.html">Libraries included in Freeplane</a> </li>
<li><a href="scripting/Scripting!_API_Changes.html">Scripting! API Changes</a> </li>
<li>New: <a href="scripting/Scripting!_Other_languages.html">Scripting! Other languages</a> - How to use other scripting languages like JavaScript or Python.</li>
</ul>
<!-- ({Category:Script}) -->
<div style="break-before: page; page-break-before: always;"></div><p>Freeplane uses a <a href="http://en.wikipedia.org/wiki/Distributed_revision_control">distributed revision control</a> system named <em>git</em>. Use this instead of the source packages that are contained in the releases if you plan to take up coding.</p>
<p>This is a guide to Working with freeplane's git repository. The first part
covers the commands you need the most, while the second part (&quot;How to's&quot;)
adds some commands for special tasks such as undoing commits or
reverting files (currently there is some redundancy between the two which
we will remove soon).</p>
<p>At least one Freeplane developer learned to use git with the help of an excellent
<a href="http://gitbu.ch/">German Open Source Press book on git</a>.</p>
<p>You can (and probably want to) use eclipse for most operations. We try to
explain this in each section, but it is a good idea to read the
<a href="http://wiki.eclipse.org/EGit/User_Guide">EGit documentation</a>. Some operations,
such as creating remote branches should be applied with the command line only
(e.g. for publishing branches: in order to make sure that tracking branches are setup correctly).</p>
<p>There is a <a href="http://www.youtube.com/watch?v=4XpnKHJAok8">fun Google Tech Talk</a>
by Linus Torvalds on git and a <a href="http://vimeo.com/46010208">excellent introductory Git talk</a> by Jessica Kerr.</p>
<h1 id="quickstart-guide"><a class="header" href="#quickstart-guide">Quickstart Guide</a></h1>
<p>This section is meant to be as brief as possible while still explaining the
necessary commands a bit so that you understand what you are doing.</p>
<h2 id="installation--configuration"><a class="header" href="#installation--configuration">Installation / Configuration</a></h2>
<p>Install git as <a href="http://git-scm.com/book/en/Getting-Started-Installing-Git">described here</a>.</p>
<p>You probably want to use the latest Eclipse (make sure to get <em>Eclipse for RCP and RAP Developers</em>) with the EGit (Eclipse-git) plugin that is part of recent Eclipse builds. Although EGit comes with its own pure java git implementation <em>JGit</em>, we rely on a native git for some commands, so please install git as described above, too.</p>
<p>After Git installation, you need to start Git Bash and run the following command line which first set the author details globally (which will be recorded for each changeset):</p>
<pre><code class="language-shell">$ git config --global user.name &quot;&lt;Firstname&gt; &lt;Lastname&gt;&quot;
$ git config --global user.email &quot;&lt;email address&gt;&quot;
</code></pre>
<h2 id="initial-checkout-clone"><a class="header" href="#initial-checkout-clone">Initial checkout (&quot;clone&quot;)</a></h2>
<h3 id="solution-1-with-git-bash"><a class="header" href="#solution-1-with-git-bash">Solution 1: with Git Bash</a></h3>
<p>Create a new directory named 'git' for git repositories:</p>
<pre><code class="language-shell">$ cd $HOME
$ mkdir git
$ cd git
</code></pre>
<p>Create a local copy of the (whole!) git repository for Freeplane by <em>cloning</em> (git-speak for &quot;checking out&quot;):</p>
<pre><code class="language-shell">$ git clone https://github.com/freeplane/freeplane.git
</code></pre>
<p>This will take 3-20 minutes depending on your network connection. </p>
<p>Now you can quit Git console:</p>
<pre><code class="language-shell">$ exit
</code></pre>
<p>A local copy of the complete history and all branches has been created. Therefore
it is possible to develop and make commits offline and only connect
for the purpose of getting changes from other devs (<em>pull</em>) or sending
your commits to a remote branch (<em>push</em>).</p>
<p>Continue with <em>Post-checkout operations</em> below!</p>
<h3 id="solution-2--with-eclipseegit"><a class="header" href="#solution-2--with-eclipseegit">Solution 2 : with Eclipse/EGit</a></h3>
<p>you can  clone the repository as follows</p>
<ul>
<li>
<p>open the Java Perspective</p>
</li>
<li>
<p>open the <em>Git Repositories View</em> (<em>Window&gt;Show View-&gt;Other...-&gt;Git-&gt;Git Repositories</em>)</p>
</li>
<li>
<p>select the <em>Clone a Git repository</em> option with the URL: https://github.com/freeplane/freeplane.git</p>
</li>
<li>
<p>enter credentials, <strong>choose all branches</strong> (!), accept the defaults or choose a different directory location (for the <em>local</em> copy of the repo), then check <em>import all existing projects after clone finishes</em>, hit <em>Finish</em> and be patient (should take &lt;10 minutes)</p>
</li>
<li>
<p><strong>NOTE:</strong>: <em>import all existing projects after clone finishes</em> is not needed when using gradle</p>
</li>
<li>
<p><strong>If you already have cloned the repository</strong> just import the projects to eclipse and execute Team-&gt;Share project-&gt;Git-&gt;Use or create repository in parent folder of project</p>
</li>
<li>
<p><strong>Enable following renames in history views.</strong> By default history view does not follow changes resulting from renaming of classes or packages and moving of java classes to other packages. These features should be activated as follows:</p>
<ul>
<li>In Eclipse main menu: Window -&gt; Preferences -&gt; Team -&gt; Git -&gt; History, here you should enable option &quot;Follow Renames&quot; </li>
<li>Using the command line set git option diff.renameLimit to some big number so that commits with big number of changes are properly processed either for the cloned repository or as a global setting:</li>
</ul>
</li>
</ul>
<pre><code class="language-shell">$ git config diff.renameLimit 100000
</code></pre>
<p>You can change the both settings also from git configuration dialog under eclipse preferences.</p>
<p><strong>Enable Git keyboard shortcuts.</strong> Funnily enough you have to give Git shortcuts some blessing before they work, see <a href="http://stackoverflow.com/a/12918446/1112408">this Stackoverflow</a> answer.</p>
<h2 id="working-with-branches"><a class="header" href="#working-with-branches">Working with branches</a></h2>
<!--
Freeplane follows the general git convention to have prefixes separated from the name
by a '/', i.e. 'docear/trunk'.
-->
<h3 id="overview-of-structure-and-commands"><a class="header" href="#overview-of-structure-and-commands">Overview of structure and commands</a></h3>
<p>Below, you see the a general structure of branches as they are proposed for any Freeplane developer to use. The remote branch <em>origin/master</em> is the global master branch for any development aiming a release in an official version. Each developer may fork his own <em>origin/<devbranch></em> (just once) by forking the sources from <em>origin/master</em> using the respective Git web site function button. On the local <em>master</em>, the developer works out his functions, pushes them up to his <em>origin/<devbranch></em> and updates from <em>origin/master</em>. Using the depicted structure, even some GIT commands take an easy form (&quot;$ git push&quot; and &quot;$ git pull&quot; could be executed without further parameters).</p>
<p><img src="coding/../images/Nnako_UsageOfGit.gif" alt="Nnako_UsageOfGit.gif" title=":size=200" /></p>
<pre><code>LEGEND
- locations of branches and persons are depicted in BLACK,
- possible activities are shown in BLUE text.
- Each activity marked wirh a &quot;star&quot; can be performed by the code developer,
- the &quot;boxed&quot; activities are performed by the admins.
- UNDERLINED activities accord to GIT commands,
- PLAIN activities describe ordinary tasks (e.g. for modification or building of code).
</code></pre>
<p>The main branch which was termed <em>trunk</em> in BAZAAR, is termed <em>master</em> in GIT. It holds all the Freeplane sources. For the Docear main branch, we use <em>docear/trunk</em>.  New (feature) branches should always be named <user>/<feature> or (if several devs are
expected to work on a feature) just <feature>. Docear branches should accordingly be prefixed with <em>docear/</em>.</p>
<h3 id="command-sequence-and-basic-steps"><a class="header" href="#command-sequence-and-basic-steps">Command sequence and basic steps</a></h3>
<p>Here are the basic commands for working with branches. The diagram is given
just as an overview,
<em>read the step descriptions in the following sections before trying any git commands</em>.</p>
<p><img src="coding/../images/Git-steps.png" alt="" title=":size=x200" /></p>
<ol>
<li>The remote repository is cloned from origin (sourceforge). You now have a complete local copy of the repository including all branches and the complete history.</li>
<li>The user creates (and checks out) a new <em>local</em> branch <em>user/newdev1</em>.</li>
<li>This branch is created on the remote side too (pushed, with <em>-u</em> to setup the tracking correctly).</li>
<li>After some development on that branch, you want to integrate this with changes in <em>master</em>. This is done by pulling from the remote master branch on origin.</li>
<li>After having checked the merge (pull = fetch + merge), you push the integrated <em>user/newdev1</em> branch to its remote counterpart.</li>
<li>You are done with development on <em>user/newdev1</em>. In order to merge your changes into <em>master</em>, you switch to the master branch (<em>git checkout master</em>) and update it (<em>git pull</em>).</li>
<li>The local <em>user/newdev</em> branch is merged into the local <em>master</em> branch.</li>
<li>After having checked the result of the merge, it is pushed to the <em>remote</em> <em>master</em> branch.</li>
</ol>
<p>In the following, development steps which roughly correspond to the commands
above are described.</p>
<h3 id="step-1-checkout-parent-branch"><a class="header" href="#step-1-checkout-parent-branch">Step 1: checkout parent branch</a></h3>
<p>Find and checkout original source branch <em>'branchname</em> (the branch you want to base
your work on, <strong>usually master</strong>) to the local work space.</p>
<p>If your parent branch is not the master you should select it first</p>
<ul>
<li>Using command line git:</li>
</ul>
<pre><code class="language-shell"># fetches the remote (tracking) branch (not necessary if you just cloned the repo)
$ git pull 
# switch to **branchname**
$ git checkout &lt;branchname&gt;
</code></pre>
<ul>
<li>Using Eclipse/EGit, 
<ul>
<li><em>Team-&gt;fetch from upstream</em> fetches all remote branches (may not be necessary)</li>
<li><em>Team-&gt;Switch To-&gt;New branch...</em>, select <em>Source ref = refs/remotes/origin/<branchname></em>,  <em>merge</em> and <em>checkout new branch</em></li>
</ul>
</li>
</ul>
<h3 id="step-2-create-your-local-branch"><a class="header" href="#step-2-create-your-local-branch">Step 2: create your local branch</a></h3>
<p>Create + check out your own <em>local</em> branch based on the original branch:
Since branches are really really cheap in git, it makes sense to create a branch
for most development tasks (especially if you want a review before you integrate into master!).
The following command creates a new local branch <devbranch> and switches to it:</p>
<pre><code class="language-shell">$ git checkout -b &lt;devbranch&gt;
</code></pre>
<h3 id="step-3-work-locally-on-your-branch"><a class="header" href="#step-3-work-locally-on-your-branch">Step 3: Work locally on your branch</a></h3>
<p>Please read <a href="http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository">chapter 2.2 of the official git book</a>
in order to get started with working with git locally. You should understand how to stage and commit changes.
Here are some basic steps:</p>
<ul>
<li>modify/add files...</li>
<li>add the modifications to the <em>index</em>:</li>
</ul>
<pre><code class="language-shell">$ git add foo.java # (**Team-&gt;Add to index** in eclipse)
</code></pre>
<ul>
<li>create a <em>commit</em> from the changes in the index:</li>
</ul>
<pre><code class="language-shell">$ git commit [-m message] # (**Team-&gt;Commit** in eclipse)
</code></pre>
<p>(if you omit -m then you will be prompted for a commit message)</p>
<ul>
<li>create more commits, this is all done locally!</li>
<li>look at the commit graph:</li>
</ul>
<pre><code class="language-shell">$ git log # might want to use **gitk** as a graphical tool
</code></pre>
<p>Eclipse git is also able to do the local commits from the team menu</p>
<h3 id="step-4-first-push-from-your-new-local-branch-to-the-repository"><a class="header" href="#step-4-first-push-from-your-new-local-branch-to-the-repository">Step 4: First push from your new local branch to the repository</a></h3>
<p>Setup git so that only the current &quot;upstream&quot; branch gets pulled/pushed
(instead of pushing <em>all</em> branches that have an upstream tracking branch
which can be confusing!):</p>
<pre><code class="language-shell">$ git config push.default tracking
</code></pre>
<p><strong>Note</strong>: this option is ignored by current EGit. On EGit you get the
same behavior by selecting <em>Team-&gt;Push To Upstream</em>.</p>
<p>Publish (&quot;push&quot;) your branch (including the commits you made) so that
others can see (and review!) it.</p>
<p><strong>NOTE: Run every push command with --dry-run first!!</strong></p>
<p><strong>Currently it's best to do this on the command line, because <em>push -u</em> sets up the tracking branch properly.</strong>
<em>Make sure you use the same name!</em> <em>Use --dry-run first</em>.</p>
<pre><code class="language-shell">$ &lt;go to the local copy of the repo (&quot;$ cd $HOME/git/freeplane&quot;)&gt;
$ git push -u origin &lt;devbranch&gt; [--dry-run]
</code></pre>
<p>You should see a message like:</p>
<pre><code>Branch user/dev1 set up to track remote branch user/dev1 from origin.
</code></pre>
<p>(When pushing from eclipse you <strong>have to configure the remote tracking
branch</strong> manually!). In any case (tracking branch configured
automatically or manually), <em>Team-&gt;Push to Upstream</em> will push the current
branch to its (configured) remote branch on origin.</p>
<h3 id="step-5-development-cycles"><a class="header" href="#step-5-development-cycles">Step 5: Development cycles</a></h3>
<p>Follow the cycle:
Switch to the right branch (may not be necessary)</p>
<pre><code class="language-shell">$ git checkout &lt;devbranch&gt; # **Team-&gt;Switch To-&gt;user/dev1** from EGit 
</code></pre>
<p>pull other people's changes on your devbranch (as a beginner you might want to do this on a copy of your repository first, it's all local!)</p>
<pre><code class="language-shell">$ git pull # **Team-&gt;Pull** from EGit
</code></pre>
<p>(People recommend to use git fetch and git merge instead of git pull)</p>
<p>you might have to resolve conflicts: (might want to use 'git mergetool'
or <a href="http://wiki.eclipse.org/EGit/User_Guide#Resolving_a_merge_conflict">Eclipse/EGit</a> )
git will place &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; and &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; comments to show the locations of the conflict(s)</p>
<p>for each conflict x:</p>
<ul>
<li>resolve conflict in <em>x</em>, remove markers</li>
<li>git add x # mark <em>x</em> as resolved</li>
</ul>
<p>to undo the merge you can use</p>
<pre><code class="language-shell">$ git reset --hard # **Team-&gt;Reset...** in EGit
</code></pre>
<p><strong>but this will throw away all uncommitted changes(!)</strong></p>
<ul>
<li>commit the conflict resolution(s):</li>
</ul>
<pre><code class="language-shell">$ git commit [-m message] # **Team-&gt;Commit** in EGit
</code></pre>
<ul>
<li>create local commits (see &quot;Step 3&quot;)</li>
<li>merge changes from master (to integrate the latest code into your feature and to make Step 6 easier)</li>
</ul>
<pre><code class="language-shell">$ git pull origin master
</code></pre>
<ul>
<li>merge changes from master with EGit: 
<ul>
<li><em>Team-&gt;Fetch from Upstream</em></li>
<li><em>Team-&gt;Merge...</em>, select <em>origin/master</em></li>
</ul>
</li>
<li>push the result of the merge with master to your remote dev branch (always run git push with --dry-run first!)</li>
</ul>
<pre><code class="language-shell">$ git push [--dry-run] # EGit: **Team-&gt;Push to Upstream**
# (same as **git push origin &lt;devbranch&gt;** because tracking is set up)
</code></pre>
<h3 id="step-6-merge-your-development-into-master"><a class="header" href="#step-6-merge-your-development-into-master">Step 6: Merge your development into master</a></h3>
<p>When you are done with your branch, and you have completed a code review of your dev branch, it should be merged into master (!) As a new developer, you <strong>must let a more experienced developer do this</strong>!</p>
<pre><code class="language-shell">$ git checkout &lt;devbranch&gt; # Switch to &lt;devbranch&gt; in EGit
$ git pull # **Team-&gt;Pull** in EGit
$ git checkout master # Switch to **master** in EGit
$ git pull # **Team-&gt;Pull** in EGit
$ git merge &lt;devbranch&gt; # EGit: **Team-&gt;Merge...**, select **local** &lt;devbranch&gt;
$ git push [--dry-run] # EGit: **Team-&gt;Push to Upstream**
# (same as **git push origin master** because tracking is set up)
</code></pre>
<h1 id="how-tos"><a class="header" href="#how-tos">How to's</a></h1>
<p>This section contains useful information for working with git, including stuff
like checking that tracking branches are set up correctly, details about working
with branches, undoing commits/reverting files, and a bit more.</p>
<h2 id="checkout-in-more-detail"><a class="header" href="#checkout-in-more-detail">Checkout in more detail</a></h2>
<p>Checking out is termed <tt>cloning</tt> in git speak:</p>
<pre><code class="language-shell">$ cd ~
$ mkdir git
$ cd git
$ git clone https://github.com/freeplane/freeplane.git freeplane
</code></pre>
<p>If you want/have read-only access, use this as the last command:</p>
<pre><code class="language-shell">$ git clone git://github.com/freeplane/freeplane.git freeplane
</code></pre>
<p>However, this will only configure the <em>master</em> branch (named <em>trunk</em> in
other VCS's such as svn) locally:</p>
<pre><code class="language-shell">$ git branch -a
* master
remotes/origin/HEAD -&gt; origin/master
remotes/origin/docear/trunk
remotes/origin/master
</code></pre>
<p>In order to check out a branch (which is simply a reference to a commit)
that currently only exists remotely (the <code>remotes/origin/*</code> references are
called <em>remote tracking branches</em>), simply switch to that branch:</p>
<pre><code class="language-shell">$ git checkout docear/trunk
</code></pre>
<p>This can be done more easily
<a href="http://wiki.eclipse.org/EGit/User_Guide#Starting_from_existing_Git_Repositories">using Eclipse</a>.
This page also describes how to import a repository into eclipse.</p>
<h2 id="using-tags"><a class="header" href="#using-tags">Using Tags</a></h2>
<p>Show all tags:</p>
<pre><code class="language-shell">$ git tag
</code></pre>
<p>Search for a tag:</p>
<pre><code class="language-shell">$ git tag -l &quot;release-1.1*&quot;
</code></pre>
<p>Show information about a tag:</p>
<pre><code class="language-shell">$ git show release-1.1.2
</code></pre>
<p>Define a tag locally:</p>
<pre><code class="language-shell">$ git tag -a &lt;tagname&gt;
# (an editor opens for you to add a description)
</code></pre>
<p>Tags are not automatically transferred when doing a <code>git push</code>,
you have to push individually:</p>
<pre><code class="language-shell">$ git push origin &lt;tagname&gt;
</code></pre>
<p>or push <em>all</em> tags:</p>
<pre><code class="language-shell">$ git push --tags origin
</code></pre>
<p>You <em>might</em> need a</p>
<pre><code class="language-shell">$ git pull --tags
</code></pre>
<p>to get all tags. See git-fetch(1) for situations when you will need this (rarely).</p>
<p>TODO: sign tags?</p>
<h2 id="working-with-branches-1"><a class="header" href="#working-with-branches-1">Working with branches</a></h2>
<p>Branches are very central to git. Do not hesitate to create feature, team
and (of course) maintenance branches.</p>
<p>You probably want set push.default to <em>tracking</em> or <em>upstream</em> which
makes sure that <em>only the current branch</em> is pushed to its <strong>upstream
branch</strong> (and NOT all configured branches):
<strong>Note</strong>: this option is ignored by current EGit. On EGit you get the
same behavior by selecting <em>Team-&gt;Push To Upstream</em>.</p>
<pre><code class="language-shell">$ git config push.default tracking
</code></pre>
<p>(you can equivalently set this to <em>upstream</em> in recent git versions).</p>
<h3 id="switch-to-another-branch"><a class="header" href="#switch-to-another-branch">Switch to another branch</a></h3>
<pre><code class="language-shell">$ git checkout &lt;branchname&gt;
</code></pre>
<p>(<code>Team-&gt;Switch To-&gt;...</code> in Eclipse)</p>
<h3 id="how-to-create-a-new-branch"><a class="header" href="#how-to-create-a-new-branch">How to create a new branch</a></h3>
<p>New (feature) branches should be named <code><user>/<feature></code>
or (if several devs work on a feature): <code><feature></code>.</p>
<pre><code class="language-shell"># commit everything that should go into the new branch
$ git status
$ git add &lt;file&gt;
[...]
$ git commit -m &quot;my changes&quot;

# create new branch locally
$ git checkout -b &lt;newbranch&gt;

# check commit log to see that above commit is in there
$ git log

# new branch must be visible and selected:
$ git branch -a  

# (make sure that the name of the new branch is correct! it is diffcult/impossible
#  to rename published branches!)

# create branch remotely, use -u to automatically configure upstream location
$ git push -u origin &lt;newbranch&gt;
# this should output something like this:
**Branch &lt;newbranch&gt; set up to track remote branch &lt;newbranch&gt; from origin.**
# (**'Note**': -u is important if you want to use git pull/push without
specifying a remote/refspec)

# remote branch of &lt;newbranch&gt; must be visible:
$ git branch -a
</code></pre>
<p>So the short story is:</p>
<pre><code class="language-shell">$ git checkout -b &lt;newbranch&gt;
$ git push -u origin &lt;newbranch&gt;
</code></pre>
<h3 id="rename-a-local-branch"><a class="header" href="#rename-a-local-branch">Rename a <em>local</em> branch</a></h3>
<pre><code class="language-shell">$ git branch -m &lt;old-branch-name&gt; &lt;new-branch-name&gt;
</code></pre>
<p>TODO: how to rename the remote tracking branch =&gt; difficult!!</p>
<h3 id="how-to-merge-local-branches"><a class="header" href="#how-to-merge-local-branches">How to merge local branches</a></h3>
<pre><code class="language-shell">$ git checkout &lt;destination_branch&gt;
$ git merge &lt;source_branch&gt;
</code></pre>
<p>If you want to abort a merge (revert the working directory to the state
before the merge command), do this:</p>
<pre><code class="language-shell">$ git reset --hard
</code></pre>
<p>(WARNING: this will remove all uncommitted changes!!)</p>
<p>In eclipse, this can be achieved by:</p>
<ul>
<li>Team-&gt;Switch To and choose &lt;destination_branch&gt;</li>
<li>Team-&gt;Merge... and choose &lt;source_branch&gt;</li>
</ul>
<p>In Eclipse, you may have to refresh all projects (F5) if a branch
has been added/modified/deleted via the command line.</p>
<h4 id="fast-forward-merges-merge-nodes"><a class="header" href="#fast-forward-merges-merge-nodes">Fast-Forward Merges (merge-nodes)</a></h4>
<p>Often the creation of a merge commit (merge node) is not necessary,
and <code>git merge</code> uses a <em>fast-forward</em> merge, omitting
the merge node:</p>
<pre><code class="language-shell">$ git merge foo
Updating 9e9a63a..732b657
Fast-forward
testfoo.txt |    1 +
1 file changed, 1 insertion(+)
create mode 100644 testfoo.txt
</code></pre>
<p>results in:</p>
<pre><code class="language-shell">* 732b657 commit in branch foo
* [...]
</code></pre>
<p>Using the option <code>--no-ff</code> you can force git to create a merge
node even if isn't absolutely necessary (<em>non-fast-forward</em> merge):</p>
<pre><code class="language-shell">$ git merge --no-ff foo2
Merge made by the 'recursive' strategy.
testfoo2.txt |    1 +
1 file changed, 1 insertion(+)
create mode 100644 testfoo2.txt
</code></pre>
<p>which will result in:</p>
<pre><code class="language-shell">*   3890bc8 (HEAD, master) Merge branch 'foo2'
|\  
| * 6bc24c5 (foo2) commit on foo2
|/  
* 
* [...]
</code></pre>
<p>This is useful when merging feature branches because it clearly shows
the integration of a new feature. On the other hand, many merge nodes
make the commit graph less readable.</p>
<h4 id="merge-master-dev-branch-locally"><a class="header" href="#merge-master-dev-branch-locally">Merge master-&gt;dev-branch <em>locally</em></a></h4>
<pre><code class="language-shell">$ git checkout &lt;devbranch&gt;
$ git merge master
</code></pre>
<h4 id="merge-dev-branch-master-locally"><a class="header" href="#merge-dev-branch-master-locally">Merge dev-branch-&gt;master <em>locally</em></a></h4>
<pre><code class="language-shell">$ git checkout master
$ git merge &lt;devbranch&gt;
</code></pre>
<h3 id="how-to-remove-a-branch"><a class="header" href="#how-to-remove-a-branch">How to remove a branch</a></h3>
<pre><code class="language-shell"># remove branch locally
# (use -D instead if you want to delete a branch that is not fully merged into HEAD!)
$ git branch -d &lt;branchname&gt;
</code></pre>
<p>You can do this with EGit using <em>Team-&gt;Advanced-&gt;Delete Branch...</em>.</p>
<p>If you accidentally deleted a (local) branch, you can recover it by
starting a new branch from the location that <code>git branch -d <branchname></code>
echoed (or by searching for the last commit on that branch in <code>git reflog</code>):</p>
<pre><code class="language-shell">$ git branch -D foo
Deleted branch foo (was 732b657).
$ git branch foo 732b657
</code></pre>
<p>(remember that branches are simply pointers to commits)</p>
<p><strong>Warning</strong>: this only works if the delete was quite recent as orphaned
commits will be deleted after some time!</p>
<p>Delete a remote branch(!):</p>
<pre><code class="language-shell">$ git push origin --delete &lt;branchname&gt;
</code></pre>
<p>Now the local and the remote tracking branch should be gone:</p>
<pre><code class="language-shell">$ git branch -a
docear/trunk
* master
remotes/origin/docear/trunk
remotes/origin/master
</code></pre>
<p>NOTE: The <em>stale</em> branch will still exist in other checkouts, until you
do a:</p>
<pre><code class="language-shell">$ git remote prune origin
</code></pre>
<p>in that other checkout. TODO: but it still exists there as a local branch!</p>
<h3 id="check-whether-your-branches-are-set-up-correctly"><a class="header" href="#check-whether-your-branches-are-set-up-correctly">Check whether your branches are set up correctly</a></h3>
<p>Make sure your branches are set up correctly for push/pull:</p>
<pre><code class="language-shell">$ git remote show origin
* remote origin
Fetch URL: https://github.com/freeplane/freeplane.git
Push  URL: https://github.com/freeplane/freeplane.git
HEAD branch: master
Remote branches:
docear/trunk tracked
master       tracked
Local branches configured for 'git pull':
docear/trunk merges with remote docear/trunk
master       merges with remote master
Local refs configured for 'git push':
docear/trunk pushes to docear/trunk (up to date)
master       pushes to master       (up to date)
</code></pre>
<h3 id="importing-a-remote-branch"><a class="header" href="#importing-a-remote-branch">Importing a remote branch</a></h3>
<p>Using command line git:</p>
<pre><code class="language-shell">$ git pull # fetches the remote (tracking) branch
$ git checkout &lt;branchname&gt;
</code></pre>
<p>Using Eclipse/EGit:</p>
<ul>
<li><em>Team-&gt;Pull</em> fetches the remote (tracking) branch</li>
<li><em>Team-&gt;Switch To-&gt;New branch...</em>, select <em>Source ref = refs/remotes/origin/<name></em></li>
</ul>
<h2 id="general-workflow"><a class="header" href="#general-workflow">General workflow</a></h2>
<p>Create a dev branch (see section on creating branches above).</p>
<h3 id="work-on-your-feature-branch"><a class="header" href="#work-on-your-feature-branch">Work on your feature branch</a></h3>
<pre><code class="language-shell"># switch to feature branch
$ git checkout &lt;feature&gt;

# fetch and merge changes (in case another dev works on this)
$ git pull

# you might have to resolve conflicts: (might want to use 'git mergetool'
# or [http://wiki.eclipse.org/EGit/User_Guide#Resolving_a_merge_conflict Eclipse/EGit])
for each conflict x:
1. resolve conflict in x, remove markers
2. git add x # mark as resolved
# commit the conflict resolution(s)
$ git commit

$ git add ...
$ git commit
[...]

# This will push commits to the remote branch that is tracked
# make sure that push.default=tracking|upstream (see above),
# otherwise other branches will be pushed as well!
$ git push [--dry-run]
</code></pre>
<h3 id="merging"><a class="header" href="#merging">Merging</a></h3>
<p>Merge master -&gt; <devbranch> (see section on merging above) every
once-in-a-while.</p>
<p>After a final code review (on your dev branch), merge <devbranch> -&gt;
master (see section on merging above).</p>
<h2 id="miscellaneous"><a class="header" href="#miscellaneous">Miscellaneous</a></h2>
<h3 id="revert-reset-files"><a class="header" href="#revert-reset-files">Revert (reset) files</a></h3>
<pre><code class="language-shell">git checkout &lt;filename&gt;
</code></pre>
<p>In EGit do this: Right-click on file -&gt; Replace With -&gt; HEAD Revision</p>
<p>Revert all files in working copy (!):</p>
<pre><code class="language-shell">git reset --hard
</code></pre>
<h3 id="undoingediting-commits"><a class="header" href="#undoingediting-commits">Undoing/editing commits</a></h3>
<p>TODO: how to remove/edit a commit locally using rebase.</p>
<h3 id="undoing-a-commit-that-is-already-pushed"><a class="header" href="#undoing-a-commit-that-is-already-pushed">Undoing a commit that is already pushed</a></h3>
<p>Use <code>git revert <commit-hash></code>, like this:</p>
<pre><code class="language-shell">$ git revert b1e9b4c9755b091f95aaa3035aca04dcb02ec1fd
</code></pre>
<p>This will generate an inverse commit, it will <em>not</em> remove the original commit:</p>
<pre><code class="language-shell">* 171881e (HEAD, master) Revert &quot;a simple commit&quot;
* b1e9b4c a simple commit
</code></pre>
<h3 id="avoid-entering-passwords-on-each-commit"><a class="header" href="#avoid-entering-passwords-on-each-commit">Avoid entering passwords on each commit</a></h3>
<p>At least if you use the command line git interface you should consider to deposit your public ssh key at github. See the <a href="https://help.github.com/categories/56/articles">section about ssh configuration</a> on github.</p>
<!-- ({Category:Coding}) -->
<div style="break-before: page; page-break-before: always;"></div><ul>
<li><a href="attic/new-wiki-initiative/customizing-freeplane.html">New wiki initiative</a></li>
<li><a href="attic/old-mediawiki-content/Home.html">Old MediaWiki content</a></li>
<li><a href="https://www.freeplane.org/oldwiki">Old MediaWiki site ❐</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
